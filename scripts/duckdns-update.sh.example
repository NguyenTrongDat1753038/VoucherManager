#!/bin/bash
# DuckDNS IP Update Script - EXAMPLE
# Copy this to duckdns-update.sh and fill in your details

DOMAIN="your-subdomain-here" # e.g. primebuvouchermanager
TOKEN="your-duckdns-token-here"
LOG_FILE="/var/log/duckdns.log"

# Get current public IP
CURRENT_IP=$(curl -s https://api.ipify.org)

# Update DuckDNS
RESPONSE=$(curl -s "https://www.duckdns.org/update?domains=${DOMAIN}&token=${TOKEN}&ip=${CURRENT_IP}")

# Log result
echo "$(date '+%Y-%m-%d %H:%M:%S') - IP: ${CURRENT_IP} - Response: ${RESPONSE}" >> "$LOG_FILE"

if [ "$RESPONSE" = "OK" ]; then
    echo "✅ DuckDNS updated successfully"
    exit 0
else
    echo "❌ DuckDNS update failed"
    exit 1
fi
